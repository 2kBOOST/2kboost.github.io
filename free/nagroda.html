<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Nagroda</title>
    <script>
function checkSteps() {
    if (
        localStorage.getItem('step1') !== 'visited' || 
        localStorage.getItem('step2') !== 'visited' || 
        localStorage.getItem('step3') !== 'visited' || 
        localStorage.getItem('step4') !== 'visited'
    ) {
        alert('Musisz przejść Kroki 1,2,3,4 aby odebrać nagrodę!');
        window.location.href = '../index.html'; // Przekierowanie na stronę główną
    }
}

// Funkcja do resetowania kroków
function resetSteps() {
    localStorage.removeItem('step1');
    localStorage.removeItem('step2');
    localStorage.removeItem('step3');
    localStorage.removeItem('step4');
    localStorage.removeItem('step5');
}

// Funkcja wywoływana po odebraniu nagrody
function redeemReward() {
    const rewardLink = document.getElementById('rewardLink').value.trim(); // Usuń zbędne spacje

    if (rewardLink) {
        // Jeśli podano link
        alert('Nagroda odebrana! Link: ' + rewardLink);

        // Reset kroków
        resetSteps();

        // Przekierowanie na stronę główną
        window.location.href = '../index.html';
    } else {
        // Jeśli link nie został podany
        alert('Wprowadź link, aby odebrać nagrodę.');
    }
}

// Funkcja wyświetlania formularza nagrody
function showRewardWindow() {
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('rewardWindow').style.display = 'block';
}

// Funkcja zamykania formularza nagrody
function closeRewardWindow() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('rewardWindow').style.display = 'none';
}

// Funkcja aktualizacji szczegółów nagrody
function updateRewardDetails() {
    const rewardType = document.getElementById('rewardType').value;
    const rewardValueInput = document.getElementById('rewardValue');

    if (rewardType === 'instagram') {
        rewardValueInput.value = 25; // Liczba obserwujących na Instagramie
    } else if (rewardType === 'tiktok') {
        rewardValueInput.value = 1000; // Liczba wyświetleń na TikToku
    }
}

// Sprawdzenie kroków przy ładowaniu strony
window.onload = checkSteps;

    </script>
</head>
<body>
    <div class="page-container">
        <!-- Reklama -->
        <div class="ad-container">
            <iframe data-aa='2365474' src='//ad.a-ads.com/2365474?size=240x400' 
                    style='width:240px; height:400px; border:0px; padding:0; overflow:hidden; background-color: transparent;'></iframe>
            <iframe data-aa='2365469' src='//ad.a-ads.com/2365469?size=970x250' 
                    style='width:970px; height:250px; border:0px; padding:0; overflow:hidden; background-color: transparent;'></iframe>
        </div>

        <div class="content-container">
            <h1>Gratulacje!</h1>
            <p>Udało Ci się przejść wszystkie kroki. Odbierz swoją nagrodę.</p>
			<button class="button" onclick="showRewardWindow()">Odbierz nagrodę</button>

        </div>

        <!-- Okno formularza nagrody -->
<div id="overlay" class="overlay" onclick="closeRewardWindow()"></div>
<div id="rewardWindow" class="reward-window">
    <h2>Formularz Nagrody</h2>
    
    <!-- Dropdown menu -->
    <p>
        Wybierz nagrodę:
        <select id="rewardType" onchange="updateRewardDetails()">
            <option value="instagram">Instagram Followers</option>
            <option value="tiktok">TikTok Views</option>
        </select>
    </p>

    <!-- Followers/Views input -->
    <p>Nagroda: <input type="text" id="rewardValue" value="25" readonly></p>

    <!-- Link input -->
    <p>Link: <input type="text" placeholder="Wklej link" id="rewardLink"></p>

    <!-- Action buttons -->
    <button onclick="redeemReward()">Odbierz</button>
    <button onclick="closeRewardWindow()">Zamknij</button>
</div>


</body>
</html>
